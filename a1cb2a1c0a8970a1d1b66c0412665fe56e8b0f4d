{
  "comments": [
    {
      "key": {
        "uuid": "7cb9150b_5d3d3397",
        "filename": "drm-lease-manager/lease-server.c",
        "patchSetId": 1
      },
      "lineNbr": 35,
      "author": {
        "id": 4
      },
      "writtenOn": "2021-03-29T10:59:55Z",
      "side": 1,
      "message": "Is that relevant only for the connection for the request/grant/denial ?\nOtherwise i think it is an assumption that might easily change in the future.\nE.g. if we have multiple containers starting at boot, we might have a batch of simultaneous connections.",
      "range": {
        "startLine": 35,
        "startChar": 0,
        "endLine": 35,
        "endChar": 21
      },
      "revId": "a1cb2a1c0a8970a1d1b66c0412665fe56e8b0f4d",
      "serverId": "2db66874-6d0c-4434-a3ad-56d904acc56e",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fbd237f6_53a6cca3",
        "filename": "drm-lease-manager/lease-server.c",
        "patchSetId": 1
      },
      "lineNbr": 35,
      "author": {
        "id": 163
      },
      "writtenOn": "2021-03-30T01:34:18Z",
      "side": 1,
      "message": "The naming of this is not very clear.  It represents the number of clients for each lease server (1 server per lease) that can be connected at the same time. \n\nA client can be in one of 3 states:\n  * waiting in the socket accept() queue \n  * connected and owning a lease\n  * connected and waiting for its lease request will be granted or denied\n\nThere can only be one connection in each of the last 2 states, and that count is represented right now by \u0027MAX_CLIENTS\u0027.  It\u0027s a bad name.  I\u0027ll update it and the usage to make it more clear.",
      "parentUuid": "7cb9150b_5d3d3397",
      "range": {
        "startLine": 35,
        "startChar": 0,
        "endLine": 35,
        "endChar": 21
      },
      "revId": "a1cb2a1c0a8970a1d1b66c0412665fe56e8b0f4d",
      "serverId": "2db66874-6d0c-4434-a3ad-56d904acc56e",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "33ebac17_b92dd2b5",
        "filename": "drm-lease-manager/lease-server.c",
        "patchSetId": 1
      },
      "lineNbr": 35,
      "author": {
        "id": 163
      },
      "writtenOn": "2021-03-30T08:33:28Z",
      "side": 1,
      "message": "I\u0027ve updated the macro name to \u0027ACTIVE_CLIENTS\u0027 and provided more explanation of how that works.\n\nIn answer to your question about what if several (for example 5) clients are all trying to claim the same lease at the same time, the first two clients will connect to the lease manager, which will choose one of those two to be granted the lease. The remaining 3 will queue up until that decision is made.  Then they will connect one by one to request the lease and either be accepted or denied, so in the end, all 5 will be processed, but only one will ever get the lease.\n\nThis process is per lease (connector) though, so if the 5 clients try to connect for 5 different leases, they can all get one.",
      "parentUuid": "fbd237f6_53a6cca3",
      "range": {
        "startLine": 35,
        "startChar": 0,
        "endLine": 35,
        "endChar": 21
      },
      "revId": "a1cb2a1c0a8970a1d1b66c0412665fe56e8b0f4d",
      "serverId": "2db66874-6d0c-4434-a3ad-56d904acc56e",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e29f153c_8b8f3925",
        "filename": "drm-lease-manager/lease-server.c",
        "patchSetId": 1
      },
      "lineNbr": 35,
      "author": {
        "id": 4
      },
      "writtenOn": "2021-03-31T15:02:39Z",
      "side": 1,
      "message": "Thanks for the explanation, Damian. Its clearer now.",
      "parentUuid": "33ebac17_b92dd2b5",
      "range": {
        "startLine": 35,
        "startChar": 0,
        "endLine": 35,
        "endChar": 21
      },
      "revId": "a1cb2a1c0a8970a1d1b66c0412665fe56e8b0f4d",
      "serverId": "2db66874-6d0c-4434-a3ad-56d904acc56e",
      "unresolved": true
    }
  ]
}